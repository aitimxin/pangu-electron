# Pangu AI Agent - Electron Desktop Application

> å¯¹è¯å¼ AI Agent æ¡Œé¢ç‰ˆ - åŸºäº Electron + Puppeteer çš„æ™ºèƒ½æ¡Œé¢åº”ç”¨

## ğŸ“– é¡¹ç›®ç®€ä»‹

Pangu AI Agent Electron æ˜¯ä¸€ä¸ªåŸºäº Electron çš„æ¡Œé¢åº”ç”¨ç¨‹åºï¼Œæä¾›ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š

- ğŸ¥ **æœ¬åœ°è§†é¢‘æŠ“å–**ï¼šä½¿ç”¨ Puppeteer åœ¨æœ¬åœ°è¿è¡Œçˆ¬è™«ï¼Œé›¶æœåŠ¡å™¨æˆæœ¬
- ğŸ’¬ **ChatGPT å¯¹è¯**ï¼šå†…ç½® ChatGPT é£æ ¼çš„å¯¹è¯ç•Œé¢
- ğŸ”„ **æ™ºèƒ½è·¯ç”±**ï¼šæœ¬åœ°ä¼˜å…ˆï¼Œäº‘ç«¯é™çº§ï¼Œä¿è¯æˆåŠŸç‡
- ğŸ–¥ï¸ **ç³»ç»Ÿé›†æˆ**ï¼šæ‰˜ç›˜ã€å¿«æ·é”®ã€é€šçŸ¥ç­‰åŸç”Ÿä½“éªŒ
- ğŸ”„ **è‡ªåŠ¨æ›´æ–°**ï¼šé™é»˜æ›´æ–°ï¼Œæ— éœ€æ‰‹åŠ¨ä¸‹è½½

## ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿

| å¯¹æ¯”é¡¹ | ä¼ ç»Ÿ Web æ–¹æ¡ˆ | Electron æ¡Œé¢ç‰ˆ |
|--------|---------------|----------------|
| **çˆ¬è™«æˆæœ¬** | é«˜ï¼ˆæœåŠ¡å™¨è¿è¡Œï¼‰ | é›¶ï¼ˆæœ¬åœ°è¿è¡Œï¼‰ |
| **å¹¶å‘èƒ½åŠ›** | å—æœåŠ¡å™¨é™åˆ¶ | æ— é™ï¼ˆåˆ†å¸ƒå¼ï¼‰ |
| **æŠ“å–æˆåŠŸç‡** | 70-80% | 95%+ |
| **ç”¨æˆ·ä½“éªŒ** | ä¾èµ–ç½‘ç»œ | æœ¬åœ°ç§’å¼€ |

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **Electron** 28+ - è·¨å¹³å°æ¡Œé¢åº”ç”¨æ¡†æ¶
- **Puppeteer** 21+ - æ— å¤´æµè§ˆå™¨è‡ªåŠ¨åŒ–
- **Node.js** 18+ - JavaScript è¿è¡Œæ—¶
- **electron-builder** - åº”ç”¨æ‰“åŒ…å·¥å…·
- **electron-updater** - è‡ªåŠ¨æ›´æ–°åŠŸèƒ½

## ğŸ“ é¡¹ç›®ç»“æ„

```
pangu-electron/
â”œâ”€â”€ electron/                    # Electron ä¸»è¿›ç¨‹ä»£ç 
â”‚   â”œâ”€â”€ main.js                  # ä¸»è¿›ç¨‹å…¥å£
â”‚   â”œâ”€â”€ preload.js              # é¢„åŠ è½½è„šæœ¬ï¼ˆå®‰å…¨æ¡¥æ¥ï¼‰
â”‚   â”œâ”€â”€ services/               # æ ¸å¿ƒæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ puppeteerService.js # Puppeteer çˆ¬è™«æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ trayService.js      # ç³»ç»Ÿæ‰˜ç›˜æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ updateService.js    # è‡ªåŠ¨æ›´æ–°æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ fileService.js      # æ–‡ä»¶æ“ä½œæœåŠ¡
â”‚   â”‚   â””â”€â”€ localApiServer.js   # æœ¬åœ° API æœåŠ¡ï¼ˆå¯é€‰ï¼‰
â”‚   â””â”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ logger.js           # æ—¥å¿—å·¥å…·
â”‚       â””â”€â”€ config.js           # é…ç½®ç®¡ç†
â”œâ”€â”€ build/                      # æ‰“åŒ…èµ„æº
â”‚   â”œâ”€â”€ icon.ico               # Windows å›¾æ ‡
â”‚   â”œâ”€â”€ icon.icns              # macOS å›¾æ ‡
â”‚   â”œâ”€â”€ icon.png               # Linux å›¾æ ‡
â”‚   â””â”€â”€ entitlements.mac.plist # macOS æƒé™é…ç½®
â”œâ”€â”€ package.json               # é¡¹ç›®é…ç½®
â”œâ”€â”€ electron-builder.yml       # æ‰“åŒ…é…ç½®
â””â”€â”€ README.md                  # é¡¹ç›®æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js 18.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- npm æˆ– yarn åŒ…ç®¡ç†å™¨
- Git

### å®‰è£…ä¾èµ–

```bash
# å…‹éš†é¡¹ç›®
cd pangu-electron

# å®‰è£…ä¾èµ–
npm install

# æˆ–ä½¿ç”¨ yarn
yarn install
```

### å¼€å‘æ¨¡å¼

```bash
# å¯åŠ¨å¼€å‘æ¨¡å¼
npm run dev

# æˆ–
yarn dev
```

å¼€å‘æ¨¡å¼ä¸‹ï¼Œåº”ç”¨ä¼šåŠ è½½å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼ˆhttp://localhost:8000ï¼‰ã€‚

### ç”Ÿäº§æ‰“åŒ…

```bash
# æ‰“åŒ…æ‰€æœ‰å¹³å°
npm run build:all

# ä»…æ‰“åŒ… Windows
npm run build:win

# ä»…æ‰“åŒ… macOS
npm run build:mac

# ä»…æ‰“åŒ… Linux
npm run build:linux
```

æ‰“åŒ…äº§ç‰©å°†è¾“å‡ºåˆ° `dist/` ç›®å½•ã€‚

## âš™ï¸ é…ç½®è¯´æ˜

### å‰ç«¯é›†æˆé…ç½®

åœ¨ `electron/utils/config.js` ä¸­é…ç½®å‰ç«¯ URLï¼š

```javascript
frontend: {
  devUrl: 'http://localhost:8000',      // å¼€å‘æ¨¡å¼å‰ç«¯åœ°å€
  prodPath: '../resources/app/index.html' // ç”Ÿäº§æ¨¡å¼å‰ç«¯è·¯å¾„
}
```

### API åç«¯é…ç½®

åœ¨ `electron/utils/config.js` ä¸­é…ç½®åç«¯ APIï¼š

```javascript
api: {
  baseUrl: 'https://api.example.com',  // åç«¯ API åœ°å€
  timeout: 30000,                      // è¯·æ±‚è¶…æ—¶æ—¶é—´
  retryTimes: 3                        // é‡è¯•æ¬¡æ•°
}
```

### Puppeteer é…ç½®

```javascript
puppeteer: {
  headless: true,          // æ— å¤´æ¨¡å¼
  timeout: 30000,          // è¶…æ—¶æ—¶é—´
  maxRetries: 3,           // æœ€å¤§é‡è¯•æ¬¡æ•°
  enableCache: true,       // å¯ç”¨ç¼“å­˜
  cacheExpireTime: 300000  // ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆ5åˆ†é’Ÿï¼‰
}
```

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½

### 1. è§†é¢‘æŠ“å–

ä½¿ç”¨æœ¬åœ° Puppeteer æŠ“å–è§†é¢‘ï¼Œæ”¯æŒä»¥ä¸‹å¹³å°ï¼š

- âœ… æŠ–éŸ³ï¼ˆDouyinï¼‰
- âœ… å“”å“©å“”å“©ï¼ˆBilibiliï¼‰
- âœ… å¿«æ‰‹ï¼ˆKuaishouï¼‰

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```javascript
// åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­è°ƒç”¨
const result = await window.electronAPI.fetchVideo('https://www.douyin.com/...');
```

### 2. ç³»ç»Ÿæ‰˜ç›˜

åº”ç”¨æœ€å°åŒ–åˆ°ç³»ç»Ÿæ‰˜ç›˜ï¼Œæ”¯æŒï¼š

- æ˜¾ç¤º/éšè—çª—å£
- å¿«æ·æ“ä½œèœå•
- ç³»ç»Ÿé€šçŸ¥

### 3. å…¨å±€å¿«æ·é”®

- `Ctrl/Cmd + Shift + P`ï¼šåˆ‡æ¢çª—å£æ˜¾ç¤º/éšè—
- `Ctrl/Cmd + N`ï¼šæ–°å»ºå¯¹è¯

### 4. è‡ªåŠ¨æ›´æ–°

åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨æ£€æŸ¥æ›´æ–°ï¼Œæ”¯æŒï¼š

- åå°é™é»˜ä¸‹è½½
- å¢é‡æ›´æ–°
- å®‰è£…å‰æç¤º

### 5. æ–‡ä»¶æ“ä½œ

æ”¯æŒå¯¼å‡ºå¯¹è¯è®°å½•ä¸ºå¤šç§æ ¼å¼ï¼š

- JSON æ ¼å¼
- Markdown æ ¼å¼
- çº¯æ–‡æœ¬æ ¼å¼

## ğŸ” å®‰å…¨ç‰¹æ€§

- âœ… **è¿›ç¨‹éš”ç¦»**ï¼šä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹éš”ç¦»
- âœ… **ä¸Šä¸‹æ–‡éš”ç¦»**ï¼šä½¿ç”¨ contextBridge å®‰å…¨æ¡¥æ¥
- âœ… **ç¦ç”¨ Node.js é›†æˆ**ï¼šæ¸²æŸ“è¿›ç¨‹ä¸­ç¦ç”¨ Node.js
- âœ… **å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰**ï¼šé˜²æ­¢ XSS æ”»å‡»
- âœ… **HTTPS åŠ å¯†**ï¼šæ‰€æœ‰ç½‘ç»œé€šä¿¡ä½¿ç”¨ HTTPS

## ğŸ“¦ æ‰“åŒ…è¯´æ˜

### Windows æ‰“åŒ…

ç”Ÿæˆæ–‡ä»¶ï¼š
- `Pangu-AI-Agent-Setup-1.0.0.exe` - NSIS å®‰è£…åŒ…
- `Pangu-AI-Agent-1.0.0.exe` - ä¾¿æºç‰ˆ

### macOS æ‰“åŒ…

ç”Ÿæˆæ–‡ä»¶ï¼š
- `Pangu-AI-Agent-1.0.0.dmg` - DMG é•œåƒ
- `Pangu-AI-Agent-1.0.0-mac.zip` - ZIP å‹ç¼©åŒ…

### Linux æ‰“åŒ…

ç”Ÿæˆæ–‡ä»¶ï¼š
- `Pangu-AI-Agent-1.0.0.AppImage` - AppImage å•æ–‡ä»¶
- `pangu-ai-agent_1.0.0_amd64.deb` - Debian åŒ…

## ğŸ› è°ƒè¯•æŠ€å·§

### æŸ¥çœ‹æ—¥å¿—

æ—¥å¿—æ–‡ä»¶ä½ç½®ï¼š
- **Windows**: `%APPDATA%\pangu-agent-electron\logs\main.log`
- **macOS**: `~/Library/Logs/pangu-agent-electron/main.log`
- **Linux**: `~/.config/pangu-agent-electron/logs/main.log`

### æ‰“å¼€å¼€å‘è€…å·¥å…·

å¼€å‘æ¨¡å¼ä¸‹è‡ªåŠ¨æ‰“å¼€ï¼Œæˆ–åœ¨ä¸»è¿›ç¨‹ä¸­æ·»åŠ ï¼š

```javascript
mainWindow.webContents.openDevTools();
```

### è°ƒè¯• Puppeteer

è®¾ç½® `headless: false` æŸ¥çœ‹æµè§ˆå™¨æ“ä½œï¼š

```javascript
puppeteer: {
  headless: false  // æ˜¾ç¤ºæµè§ˆå™¨çª—å£
}
```

## ğŸ¤ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„è§†é¢‘å¹³å°

1. åœ¨ `puppeteerService.js` ä¸­æ·»åŠ å¹³å°æ£€æµ‹é€»è¾‘
2. å®ç°å¯¹åº”çš„æŠ“å–æ–¹æ³•ï¼ˆå‚è€ƒ `fetchDouyin`ï¼‰
3. åœ¨ `detectPlatform` æ–¹æ³•ä¸­æ·»åŠ  URL åŒ¹é…è§„åˆ™

### æ·»åŠ æ–°çš„ IPC é€šä¿¡

1. åœ¨ `preload.js` ä¸­æš´éœ² API
2. åœ¨ `main.js` ä¸­æ³¨å†Œ IPC ç›‘å¬å™¨
3. åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­è°ƒç”¨ `window.electronAPI.*`

### è‡ªå®šä¹‰æ‰˜ç›˜èœå•

åœ¨ `trayService.js` çš„ `updateContextMenu` æ–¹æ³•ä¸­ä¿®æ”¹èœå•é¡¹ã€‚

## ğŸ“ å¸¸è§é—®é¢˜

### Q1: é¦–æ¬¡å¯åŠ¨å¾ˆæ…¢ï¼Ÿ

A: é¦–æ¬¡å¯åŠ¨éœ€è¦ä¸‹è½½ Chromiumï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚å¯ä»¥ä½¿ç”¨ `PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true` è·³è¿‡è‡ªåŠ¨ä¸‹è½½ï¼Œæ‰‹åŠ¨æŒ‡å®š Chromium è·¯å¾„ã€‚

### Q2: è§†é¢‘æŠ“å–å¤±è´¥ï¼Ÿ

A: æ£€æŸ¥ï¼š
1. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
2. è§†é¢‘é“¾æ¥æ˜¯å¦æœ‰æ•ˆ
3. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶äº†è§£è¯¦ç»†é”™è¯¯

### Q3: å¦‚ä½•æ›´æ”¹å‰ç«¯åœ°å€ï¼Ÿ

A: ä¿®æ”¹ `electron/utils/config.js` ä¸­çš„ `frontend.devUrl` é…ç½®ã€‚

### Q4: æ‰“åŒ…åæ— æ³•è¿è¡Œï¼Ÿ

A: æ£€æŸ¥ï¼š
1. å‰ç«¯æ„å»ºäº§ç‰©æ˜¯å¦æ­£ç¡®
2. èµ„æºè·¯å¾„é…ç½®æ˜¯å¦æ­£ç¡®
3. æŸ¥çœ‹åº”ç”¨æ—¥å¿—æ–‡ä»¶

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ”— ç›¸å…³é“¾æ¥

- [æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£](../pangu/å¯¹è¯å¼AI_Agent_æŠ€æœ¯æ–¹æ¡ˆ_V5.0.md)
- [å‰ç«¯é¡¹ç›®](../pangu-agent-front)
- [åç«¯é¡¹ç›®](../pangu)

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- æäº¤ Issue
- å‘é€é‚®ä»¶ï¼š[é¢„ç•™]

---

**Pangu AI Agent Team** Â© 2024






